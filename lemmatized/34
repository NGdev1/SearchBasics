   скелетный   анимация   на   палец   график   статья   программирование   игра   новость   статья   код   арт   дизайн   индустрия   подсказка   термин   FAQ   страница   сообщество   форум   качалка   участник   пользователь   темный   тема   публикация   проект   форум   работа   входить   программированиестатьиграфика   скелетный   анимация   на   палец   автор   константин   гиляровский   многие   новичок   который   только   начинать   постигать   скелетка   очень   часто   не   понимать   как   она   работать   даже   при   наличие   многий   статья   на   данный   ресурс   и   что   для   ее   работа   нужно   собственно   он   я   и   хотеть   бы   объяснять   на   палец   как   работать   скелетный   анимация   ингредиент   процесс   ингредиент   любой   скелетный   анимация   основывать   на   шесть   неизменный   составлять   1   индекс   кость   в   вершина   обычно   они   бывать   не   много   четыре   2   вес   костя   в   вершина   их   число   совпадать   с   количество   индекс   и   сумма   весь   весы   должный   быть   равный   единица   3   список   кость   это   простой   массив   с   название   костя   каждый   индекс   кость   из   вершина   соответствовать   кость   из   этот   массив   поэтому   этот   массив   ни   в   кой   случай   нельзя   перестраивать   4   Bind   pose   это   поза   в   который   быть   заскинен   модель   внутри   файл   это   выглядеть   как   массив   обратный   матрица   на   каждый   кость   и   один   матрица   для   весь   модель   5   иерархия   костя   это   описание   зависимость   кость   друг   от   друг   у   каждый   кость   мочь   быть   не   большой   один   предок   но   ребенок   мочь   быть   сколько   угодно   обычно   вместе   с   иерархия   в   формат   писаться   базовый   положение   кость   6   сам   анимация   обычно   представлять   из   себя   массив   время   где   каждый   элемент   это   время   ключ   и   массив   матрица   на   каждый   кость   итак   при   чтение   формат   мы   должный   доставать   четыре   компонент   модель   который   содержать   в   вершина   индекс   и   вес   кость   массив   кость   и   их   bind   pose   иерархия   кость   анимация   после   то   как   получать   ингредиент   мы   мочь   идти   далеко   так   как   далеко   речь   пойти   о   матрица   хотеть   сразу   сказать   что   для   много   хороший   качество   анимация   советовать   хранить   матрица   в   разбирать   состояние   то   быть   в   вид   позиция   размер   и   кватернион   это   сделать   качество   результат   интерполяция   на   хороший   уровень   вот   структура   кость   который   обычно   использоваться   struct   Bone   Bone   Parent   указатель   на   предок   этот   информация   бывать   полезный   Bone   Childs   массив   указатель   на   ребенок   float4x4   Base   матрица   базовый   положение   float4x4   Release   релизный   матрица   быть   использоваться   в   анимация   процесс   как   должный   происходить   анимация   запоминать   порядок   перемножение   матрица   очень   важный   1   мы   проходить   по   ключ   анимация   и   находить   два   ключ   между   который   располагать   искомый   время   и   для   каждый   кость   в   матрица   Release   записывать   интерполировать   значение   псевдокод   float   DownTime   Time   i   float   UpTime   Time   i   1   float   LerpKoef   CurrentTime   DownTime   UpTime   DownTime   Bone   Release   Lerp   Key   i   Key   i   1   LerpKoef   если   же   кадр   находить   не   удаваться   использоваться   базовый   значение   кость   Bone   Release   Base   2   после   заполнение   Release   матрица   весь   кость   мы   должный   обновлять   иерархия   Bone   Release   Release   Parent   Release   при   условие   что   быть   предок   и   он   уже   обновлять   for   int   i   0   i   ChildsCount   i   Childs   i   Update   вызывать   обновление   у   ребенок   3   домножать   Release   на   матрица   из   bind   pose   и   класть   она   в   релизный   массив   Final   i   ModelBindPose   Offset   i   Bone   i   если   представлять   весь   этот   процесс   в   голова   то   он   быть   выглядеть   так   представлять   кость   в   вид   реальный   косточка   располагать   начало   этот   косточка   в   0   0   0   в   код   у   мы   за   это   отвечать   Final   i   ModelBindPose   Offset   i   Bone   i   да   да   именно   последний   пункт   а   весь   дело   в   последовательность   перемножение   матрица   после   то   как   кость   быть   перенести   она   должный   принимать   поза   который   записывать   в   анимация   этот   процедура   идентичный   первый   пункт   после   выполнение   этот   процедура   оставаться   лишь   перенести   наш   кость   в   конец   кость   предок   который   к   этот   момент   уже   должный   быть   проходить   этот   процедура   этот   стадия   идентичный   второй   пункт   теперь   массив   матрица   кость   текущий   кадр   готовый   оставаться   всего   лишь   домножать   каждый   вершина   на   матрица   с   учет   вес   выглядеть   это   так   код   из   шейдер   float4   pos   mul   Input   Position   skinMat   Input   Index   x   Input   Weight   x   pos   mul   Input   Position   skinMat   Input   Index   y   Input   Weight   y   pos   mul   Input   Position   skinMat   Input   Index   z   Input   Weight   z   pos   mul   Input   Position   skinMat   Input   Index   w   Input   Weight   w   pos   mul   pos   world   Output   Position   mul   pos   matViewProjection   это   только   для   позиция   такой   же   способ   нужно   обновлять   нормаль   тангента   и   бинормаль   собственно   говорить   это   весь   из   простой   плюшка   можно   также   добавлять   интерполяция   между   различный   анимация   этот   процесс   вклиниваться   между   пункт   1   и   2   до   обновление   иерархия   мы   должный   проинтерполировать   Release   матрица   между   последний   использовать   кадр   из   предыдущий   анимация   и   значение   кадр   из   текущий   анимация   сразу   хотеть   предупреждать   что   проигрыватель   анимация   нужно   отделять   от   модель   чтобы   один   и   туго   модель   можно   быть   ставить   в   разный   кадр   и   разный   место   ну   и   под   конец   небольшой   концепт   код   AnimationPlayer   Player   AnimationPlayer   SomeCoolModel   Player   Play   Walk   LOOPED   Player   ChangingTime   100   время   для   интерполяция   между   анимация   Player   Play   Run   LOOPED   Player   Update   DeltaTime   SomeCoolModel   Shader   SetMatrixArray   Skin   Player   Frame   Player   BonesCount   SomeCoolModel   Draw   спасибо   за   внимание   Demo   график   анимация   скелетный   анимация   26   декабрь   2012   обновление   15   фев   2013   комментарий   59   убирать   реклама   контакт   сообщество   участник   каталог   сайт   категория   архив   новость   GameDev   ru   разработка   игра   2001   2019