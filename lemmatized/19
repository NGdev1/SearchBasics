   программирование   звук   с   использование   XAudio2   звук   статья   программирование   игра   новость   статья   код   арт   дизайн   индустрия   подсказка   термин   FAQ   страница   сообщество   форум   качалка   участник   пользователь   темный   тема   публикация   проект   форум   работа   входить   программированиестатьизвук   программирование   звук   с   использование   XAudio2   автор   s3dworld   все   добрый   время   сутки   это   мой   первый   статья   на   GameDev   ru   который   появляться   в   связь   с   то   что   в   недавний   время   решать   я   сам   переходить   на   библиотека   XAudio2   документация   по   она   в   интернет   на   русский   нет   введение   XAudio2   первый   приготовление   сохранять   аудио   данные   источник   звук   тестировать   заключение   введение   помимо   XAudio2   существовать   несколько   библиотека   для   вывод   звук   DirectSound   OpenAL   FMOD   BASS   но   я   хотеться   поговорить   именно   об   XAudio2   так   как   об   это   нет   русский   статья   как   заявлять   сам   Microsoft   смотреть   тут   она   больше   не   поддерживать   DirectSound   и   новый   проект   в   зависимость   от   тип   должный   использовать   новый   программный   обеспечение   для   игра   это   XAudio2   и   X3DAudio   для   весь   остальной   Windows   Core   Audio   библиотека   XAudio2   входить   в   состав   Microsoft   DirectX   SDK   и   при   ее   использование   мочь   возникать   такой   же   проблема   как   и   с   библиотека   D3DX9   постоянно   нужно   пользователь   обновлять   Microsoft   DirectX   самый   последний   версия   Microsoft   DirectX   июнь   2010   включать   следующий   библиотека   XAudio2   XAudio2 _ 0   dll   XAudio2 _ 1   dll   XAudio2 _ 2   dll   XAudio2 _ 3   dll   XAudio2 _ 4   dll   XAudio2 _ 5   dll   XAudio2 _ 6   dll   XAudio2 _ 7   dll   XAudioD2 _ 7   dll   так   что   если   ваш   программа   не   зарабатывать   на   другой   компьютер   то   возможный   два   вариант   вы   что   то   сделать   не   так   у   пользователь   не   стоять   тот   же   самый   библиотека   который   вы   использовать   для   создание   программа   а   теперь   переходить   к   рассмотрение   XAudio2   XAudio2   первый   приготовление   в   XAudio2   иметься   два   основной   интерфейс   IXAudio2   и   IXAudio2Voice   IXAudio2   это   интерфейс   который   работать   со   все   аудио   голос   IXAudio2Voice   IXAudio2Voice   это   базовый   интерфейс   для   три   другой   IXAudio2SourceVoice   IXAudio2SubmixVoice   и   IXAudio2MasteringVoice   все   этот   интерфейс   IXAudio2SourceVoice   IXAudio2SubmixVoice   и   IXAudio2MasteringVoice   обрабатывать   несжатый   аудио   давать   IXAudio2SourceVoice   этот   интерфейс   который   непосредственно   получать   несжатый   аудио   данные   далее   он   передавать   данные   в   IXAudio2SubmixVoice   если   конечно   тот   существовать   что   являться   необязательный   или   же   в   IXAudio2MasteringVoice   IXAudio2SubmixVoice   служить   для   всевозможный   преобразование   аудио   данные   результат   свой   работа   он   передавать   IXAudio2MasteringVoice   IXAudio2MasteringVoice   тоже   мочь   производить   некоторый   операция   над   аудио   данные   и   именно   через   этот   интерфейс   данные   попадать   в   аудио   устройство   давать   интерфейс   мочь   быть   создавать   несколько   но   одновременно   мочь   работать   только   один   структура   для   обработка   голос   мочь   быть   несколько   они   разнообразие   большой   от   простой   до   переходить   к   код   создавать   в   Visual   C   новый   пустой   проект   Win32   приложение   указывать   где   у   мы   находиться   заголовочный   файл   include   и   библиотека   lib   от   Microsoft   DirectX   SDK   замечание   для   работа   с   XAudio2   не   нужно   линковщик   указывать   статический   библиотека   lib   достаточно   к   проект   подключать   заголовочный   файл   XAudio2   h   начинать   с   создание   класс   для   весь   операция   с   аудио   библиотека   называть   он   Audio   добавлять   к   проект   файл   Audio   h   и   вносить   в   он   pragma   once   define   AUDIO _ OK   0   define   AUDIO _ ERROR _ CREATE _ AUDIO   1   define   AUDIO _ ERROR _ CREATE _ MASTERING _ VOICE   2   include   XAudio2   h   class   Audio   private   static   Audio   instance   int   resultCode   bool   isCreate   IXAudio2   audio   IXAudio2MasteringVoice   masteringVoice   Audio   void   Audio   void   public   static   Audio   GetInstance   void   void   Release   void   int   GetResult   void   const   bool   Create   void   теперь   разбирать   что   к   что   define   AUDIO _ OK   0   define   AUDIO _ ERROR _ CREATE _ AUDIO   1   define   AUDIO _ ERROR _ CREATE _ MASTERING _ VOICE   2   мы   это   быть   нужно   для   контроль   выполнение   функция   пока   у   мы   быть   всего   один   функция   который   возможно   выполняться   с   ошибка   int   GetResult   void   const   возвращать   тот   самый   код   выполнение   static   Audio   instance   static   Audio   GetInstance   void   void   Release   void   для   то   чтобы   в   память   находиться   только   один   экземпляр   класс   Audio   мы   быть   хранить   его   адрес   в   статический   переменная   bool   Create   void   служить   для   создание   два   интерфейс   IXAudio2   и   IXAudio2MasteringVoice   bool   isCreate   так   мы   быть   знать   создавать   ли   мы   главный   интерфейс   теперь   создавать   файл   Audio   cpp   include   Audio   h   пока   у   мы   нет   экземпляр   в   память   Audio   Audio   instance   0   конструктор   Audio   Audio   void   resultCode   AUDIO _ OK   isCreate   false   audio   0   masteringVoice   0   деструктор   Audio   Audio   void   сначала   освобождать   весь   голос   у   мы   пока   только   IXAudio2MasteringVoice   if   masteringVoice   masteringVoice   DestroyVoice   теперь   освобождать   главный   интерфейс   if   audio   audio   Release   если   быть   инициализировать   работа   с   COM   то   деинициализировать   она   if   isCreate   CoUninitialize   получать   указатель   на   единственный   экземпляр   класс   если   экземпляр   еще   не   создавать   то   создавать   он   и   возвращать   на   он   указатель   Audio   Audio   GetInstance   void   if   instance   instance   new   Audio   return   instance   удалять   экземпляр   void   Audio   Release   void   if   instance   delete   instance   instance   0   получение   код   выполнение   int   Audio   GetResult   void   const   return   resultCode   создание   bool   Audio   Create   void   пока   быть   считать   что   у   мы   все   хороший   resultCode   AUDIO _ OK   иницилизировать   работа   с   COM   в   отдельный   поток   CoInitializeEx   0   COINIT _ MULTITHREADED   создавать   главный   интерфейс   if   XAudio2Create   audio   0   XAUDIO2 _ DEFAULT _ PROCESSOR   S _ OK   CoUninitialize   resultCode   AUDIO _ ERROR _ CREATE _ AUDIO   return   false   создавать   главный   голос   if   audio   CreateMasteringVoice   masteringVoice   XAUDIO2 _ DEFAULT _ CHANNELS   XAUDIO2 _ DEFAULT _ SAMPLERATE   0   0   0   S _ OK   CoUninitialize   resultCode   AUDIO _ ERROR _ CREATE _ MASTERING _ VOICE   return   false   если   доходить   сюда   то   все   в   порядок   isCreate   true   return   true   тут   разбирать   только   функция   Create   функция   XAudio2Create   использоваться   для   создание   главный   интерфейс   IXAudio2   выглядеть   следующий   образ   HRESULT   XAudio2Create   IXAudio2   ppXAudio2   UINT32   Flags   0   XAUDIO2 _ PROCESSOR   XAudio2Processor   XAUDIO2 _ DEFAULT _ PROCESSOR   замечание   при   работа   с   COM   не   обязательно   у   функция   заполнять   весь   параметр   если   они   присваиваться   значение   по   умолчание   ppXAudio2   указатель   на   указатель   интерфейс   IXAudio2   Flags   использоваться   для   установка   режим   работа   мочь   быть   либо   0   либо   XAUDIO2 _ DEBUG _ ENGINE   в   этот   случай   быть   запрашивать   отладочный   информация   из   библиотека   XAudio2Processor   указывать   какой   процессор   использовать   для   обработка   аудио   тут   мы   оставлять   значение   по   умолчание   а   полный   список   можно   посмотреть   в   структура   XAUDIO2 _ WINDOWS _ PROCESSOR _ SPECIFIER   если   функция   завершаться   успешно   то   обратный   величина   S _ OK   далее   мы   создавать   главный   интерфейс   для   передача   аудио   данные   на   аудио   устройство   через   функция   CreateMasteringVoice   интерфейс   IXAudio2   вот   как   она   выглядеть   HRESULT   CreateMasteringVoice   IXAudio2MasteringVoice   ppMasteringVoice   UINT32   InputChannels   XAUDIO2 _ DEFAULT _ CHANNELS   UINT32   InputSampleRate   XAUDIO2 _ DEFAULT _ SAMPLERATE   UINT32   Flags   0   UINT32   DeviceIndex   0   const   XAUDIO2 _ EFFECT _ CHAIN   pEffectChain   NULL   ppMasteringVoice   указатель   на   указывать   интерфейс   IXAudio2MasteringVoice   InputChannels   указывать   сколько   канал   быть   обрабатывать   IXAudio2MasteringVoice   InputSampleRate   устанавливать   норма   отбор   это   значение   должно   быть   кратный   XAUDIO2 _ QUANTUM _ DENOMINATOR   и   лежать   в   промежуток   от   XAUDIO2 _ MIN _ SAMPLE _ RATE   до   XAUDIO2 _ MAX _ SAMPLE _ RATE   включая   сам   промежуток   по   умолчание   использоваться   значение   XAUDIO2 _ DEFAULT _ SAMPLERATE   Flags   определять   поведение   и   всегда   должный   быть   равный   ноль   DeviceIndex   указывать   на   какой   аудио   устройство   прикреплять   IXAudio2MasteringVoice   указывать   значение   0   мы   прикреплять   IXAudio2MasteringVoice   к   глобальный   аудио   устройство   pEffectChain   указатель   на   список   эффект   мы   он   пока   не   нужный   поэтому   поставлять   0   если   функция   завершаться   успешно   то   обратный   величина   S _ OK   теперь   приступать   к   создание   аудио   буфер   страница   1   2   3   следующий   программирование   звук   23   апрель   2011   комментарий   18   убирать   реклама   контакт   сообщество   участник   каталог   сайт   категория   архив   новость   GameDev   ru   разработка   игра   2001   2019